# --------------------------------------------------------------------------
# validate-portfolio Template
# --------------------------------------------------------------------------
# See https://aka.ms/yaml for Azure DevOps Pipeline documentation
# --------------------------------------------------------------------------

parameters:
- name:     portfolioName
  type:     string

steps:
- task: PowerShell@2
  displayName: Validate Portfolio Name
  inputs:
    targetType: inline
    script: |
      # Define the known list of portfolio names
      $knownPortfolios = @("tbd", "tbd", "tbd")  # <-- TODO: Update this list with actual portfolio names

      # Check if the portfolioName is in the list
      if ($knownPortfolios -contains $env:PORTFOLIO_NAME) {
          Write-Host "Portfolio name '$env:PORTFOLIO_NAME' is valid."
      } else {
          Write-Host "Error: Portfolio name '$env:PORTFOLIO_NAME' is not valid."
          Write-Host "Valid portfolio names are: $($knownPortfolios -join ', ')"
          exit 1
      }
    failOnStderr: false
  env:
    PORTFOLIO_NAME: ${{ parameters.portfolioName }}
  continueOnError: true